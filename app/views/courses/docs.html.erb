<table class="table table-hover">
  <tr>
    <th></th>
    <th><%= t :name %></th>
    <th><%= t :size %></th>
    <th><%= t :date_modified %></th>
    <th></th>
  </tr>
  <tbody>
  <% @files.each do |file| -%>
    <% if current_user.can_read(@folder) -%>
    <tr class="odd" onmouseover="display_options(this);" onmouseout="hide_options(this);" onclick="item_click(this);">
      <td onclick="stop_bubble(this.id);"><%= check_box_tag "id[]", file.id, false, {:class => "chkbox", :onclick => "check_click();"} %></td>
      <td><%= file_icon(file) %></td>
      <td class="file_name"><%= link_to file.attachment_file_name, file_path(file), :title => "#{t(:download)} #{file.attachment_file_name}" %></td>
      <td class="file_type"><%= file.filetype_to_human %></td>
      <td class="file_size"><%= number_to_human_size(file.attachment_file_size, :locale => I18n.locale) %></td>
      <td class="file_modified"><%= l file.updated_at.localtime, :format => :short %></td>
      <td class="options" onclick="stop_bubble(this.id);">
      <% if current_user.can_update(@folder) -%>
        <%= link_to fa_icon("edit"), edit_file_path(file), :title => t(:edit), :class => 'options', :style => 'color:#FFF' %>&nbsp;
      <% end -%>
      <% if current_user.can_delete(@folder) -%>
        <%= link_to fa_icon("remove"), file_path(file), :method => :delete, :data => { :confirm => t(:are_you_sure) }, :title => t(:delete_item), :class => 'options', :style => 'color:#FFF' %>&nbsp;
      <% end -%>
      <%= link_to fa_icon("clipboard"),
        { :controller => :clipboard, :action => :create, :id => file.id, :type => 'file', :folder_id => @folder, :authenticity_token => form_authenticity_token }, :method => :post, :title => t(:add_to_clipboard), :class => 'options', :style => 'color:#FFF' %>&nbsp;
      <% if file.mime_type == 'image' then %>
        <%= link_to fa_icon("search"), file.attachment.url, :rel => "shadowbox", :title => t(:preview), :class => 'options', :style => 'color:#FFF' %>
      <% else %>
        <%= link_to fa_icon("search"), { :controller => :files, :action => :preview, :id => file.id }, :rel => "shadowbox;width=800;height=600", :title => t(:preview), :class => 'options', :style => 'color:#FFF' %>
      <% end %>
      </td>
    </tr>
    <% end -%>
  <% end -%>
  </tbody>
</table>